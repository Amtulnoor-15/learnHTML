<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Catch the Emoji Game</title>
  <style>
    body {
      margin: 0;
      padding: 0;
      font-family: Arial, sans-serif;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      background: linear-gradient(120deg, #a1c4fd, #c2e9fb);
    }
    canvas{
      
    }
    canvas {
      background: #fff;
      border: 3px solid #333;
      border-radius: 10px;
    }
  </style>
</head>
<body>
  <canvas id="gameCanvas" width="400" height="500"></canvas>

  <script>
    // 🎮 Game Classes (OOP)

    class Player {
      constructor(x, y, width, height, speed) {
        this.x = x;
        this.y = y;
        this.width = width;
        this.height = height;
        this.speed = speed;
      }

      draw(ctx) {
        ctx.fillStyle = "#6c5ce7";
        ctx.fillRect(this.x, this.y, this.width, this.height);
      }

      move(direction, canvasWidth) {
        if (direction === "left" && this.x > 0) {
          this.x -= this.speed;
        } else if (direction === "right" && this.x + this.width < canvasWidth) {
          this.x += this.speed;
        }
      }
    }

    class Emoji {
      constructor(x, y, speed, emoji) {
        this.x = x;
        this.y = y;
        this.speed = speed;
        this.emoji = emoji;
      }

      draw(ctx) {
        ctx.font = "24px Arial";
        ctx.fillText(this.emoji, this.x, this.y);
      }

      update() {
        this.y += this.speed;
      }
    }

    class Game {
      constructor(canvasId) {
        this.canvas = document.getElementById(canvasId);
        this.ctx = this.canvas.getContext("2d");
        this.player = new Player(170, 450, 60, 20, 20);
        this.emojis = [];
        this.score = 0;
        this.gameOver = false;
        this.emojisList = ["🍎", "🍌", "🍇", "🍒", "🍩", "🍕"];
        this.initControls();
        this.start();
      }

      initControls() {
        document.addEventListener("keydown", (e) => {
          if (e.key === "ArrowLeft") this.player.move("left", this.canvas.width);
          if (e.key === "ArrowRight") this.player.move("right", this.canvas.width);
        });
      }

      spawnEmoji() {
        const x = Math.random() * (this.canvas.width - 20);
        const emoji = this.emojisList[Math.floor(Math.random() * this.emojisList.length)];
        this.emojis.push(new Emoji(x, 0, 2 + Math.random() * 3, emoji));
      }

      checkCollision(emoji) {
        return (
          emoji.x > this.player.x &&
          emoji.x < this.player.x + this.player.width &&
          emoji.y > this.player.y &&
          emoji.y < this.player.y + this.player.height
        );
      }

      update() {
        this.ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);
        this.player.draw(this.ctx);

        this.emojis.forEach((emoji, index) => {
          emoji.update();
          emoji.draw(this.ctx);

          if (this.checkCollision(emoji)) {
            this.score++;
            this.emojis.splice(index, 1);
          } else if (emoji.y > this.canvas.height) {
            this.gameOver = true;
          }
        });

        this.ctx.fillStyle = "#333";
        this.ctx.font = "16px Arial";
        this.ctx.fillText("Score: " + this.score, 10, 20);
      }

      start() {
        setInterval(() => {
          if (!this.gameOver) this.spawnEmoji();
        }, 1500);

        const loop = () => {
          if (!this.gameOver) {
            this.update();
            requestAnimationFrame(loop);
          } else {
            this.ctx.fillStyle = "red";
            this.ctx.font = "24px Arial";
            this.ctx.fillText("Game Over! Final Score: " + this.score, 50, 250);
          }
        };
        loop();
      }
    }

    // Start Game
    new Game("gameCanvas");
  </script>
</body>
</html>
